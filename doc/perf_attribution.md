# 因子业绩归因方案报告

<!-- toc orderedList:0 -->

- [因子业绩归因方案报告](#因子业绩归因方案报告)
	- [回测设置](#回测设置)
	- [待选方案](#待选方案)
		- [Leave One Out (LOO)](#leave-one-out-loo)
		- [Add One In (AOI)](#add-one-in-aoi)
		- [Focused Leave One Out (FocusLOO)](#focused-leave-one-out-focusloo)
		- [Focused Add One In (FocusAOI)](#focused-add-one-in-focusaoi)
	- [总体结果](#总体结果)
	- [各方案累积收益图](#各方案累积收益图)
	- [附记](#附记)
		- [因子组合](#因子组合)
		- [调仓周期](#调仓周期)

<!-- tocstop -->

## 回测设置

* **回测周期**：2008年1月2日 ~ 2015年11月1日，总共1388个交易日；
* **调仓周期**：每个周末调仓；
* **调仓方法**：取预期收益排名前100的股票，平均分配权重；
* **使用因子**：``Growth``、``HRL``、``R5MOHRL``;
* **ER模型**：调仓日当天最新模型。

## 待选方案

我们在调仓日分别用以下四种方法计算**因子贡献组合**：

### Leave One Out (LOO)

* 使用所有因子计算得整体组合：$P$;
* 针对因子α，将该因子值置0，计算得α因子补组合：$\tilde P_{\alpha}$;
* 定义因子贡献组合为：$P_{\alpha} = P - \tilde P_{\alpha}$。

### Add One In (AOI)

* 针对因子α，仅使用该因子，计算得组合：$P_{\alpha}$；
* 该组合$P_{\alpha}$即定义为因子贡献组合。

### Focused Leave One Out (FocusLOO)

* 使用所有因子计算得整体组合：$P$;
* 针对因子α，将该因子值置0，计算得α因子补组合：$\tilde P_{\alpha}$;
* 将$\tilde P_{\alpha}$资产中，在$P$组合权重为0的，权重也置为0：
  $$
    \hat P_{\alpha, i} = \tilde P_{\alpha, i} × Ι_{P_i \neq 0}
  $$
* 定义因子贡献组合为：$P_{\alpha} = P - \hat P_{\alpha}$。

### Focused Add One In (FocusAOI)

* 使用所有因子计算得整体组合：$P$;
*  针对因子α，仅使用该因子，计算得组合：$\tilde P_{\alpha}$；
* 将$\tilde P_{\alpha}$资产中，在$P$组合权重为0的，权重也置为0：
  $$
    P_{\alpha, i} = \tilde P_{\alpha, i} × Ι_{P_i \neq 0}
  $$
* 该组合$P_{\alpha}$即定义为因子贡献组合。

在非调仓日组合正常的按照每日收益率evolve。

## 总体结果

* **Ret. %**：组合的累计收益。对于因子贡献组合，是将三个组合收益累和的结果；
* **Corr. %**：因子贡献组合的每日收益与整体组合每日收益的相关系数；
* **sign mismatches**: 指整体组合收益的符号与单个因子贡献组合符号都不相同的天数。

|                    | Portfolio|   LOO |    AOI|  FocusLOO| FocusAOI|
|--------------------|---------:|------:|------:|---------:|--------:|
| **Ret. %**         |    148.08| -76.56| 142.79|     53.55|   207.56|
| **Corr. %**        |         -|  63.44|  83.96|     94.44|    97.14|
| **sign mismatches**|         -|     82|     36|       39 |       12|

## 各方案累积收益图

![](perf_attribution.png)

## 附记

### 因子组合

上文的结论在其它因子组合上也有同样的表现，下面的表为取另外三个因子: ``RMC``, ``RVC``以及``D5M5``，

|                    | Portfolio|   LOO |    AOI|  FocusLOO| FocusAOI|
|--------------------|---------:|------:|------:|---------:|--------:|
| **Ret. %**         |    151.51| -87.89| 159.22|     61.37|   212.85|
| **Corr. %**        |         -|  61.86|  81.29|     95.29|    97.09|
| **sign mismatches**|         -|     80|     39|       25 |       10|

### 调仓周期

更新调仓周期后，仍然得到相似的结论：取调仓周期为两周，

|                    | Portfolio|   LOO |    AOI|  FocusLOO| FocusAOI|
|--------------------|---------:|------:|------:|---------:|--------:|
| **Ret. %**         |    109.06|-124.54| 138.13|     21.63|   177.96|
| **Corr. %**        |         -|  61.37|  78.93|     93.91|    96.31|
| **sign mismatches**|         -|     73|     43|       21 |        7|
